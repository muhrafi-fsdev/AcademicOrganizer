<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics - Academic Organizer</title>
    <meta name="description" content="Analytics - Analisis performa dan produktivitas akademik">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../assets/images/logo.png">
    <link rel="apple-touch-icon" href="../assets/images/logo.png">

    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="../assets/js/app.js"></script>
</head>

<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h3>
                    <img src="../assets/images/logo.png" alt="Logo"
                        style="width: 36px; height: 36px; object-fit: contain;">
                    <span class="text-gradient">AcademicOrg</span>
                </h3>
                <p>Halo, Student!</p>
                <small>Teknik Informatika</small>
            </div>

            <ul class="sidebar-menu">
                <li>
                    <a href="dashboard.html">
                        <i class="fas fa-home"></i>
                        Dashboard
                    </a>
                </li>
                <li>
                    <a href="experiments.html">
                        <i class="fas fa-flask"></i>
                        Experiment Log
                    </a>
                </li>
                <li>
                    <a href="tasks.html">
                        <i class="fas fa-tasks"></i>
                        Task Manager
                    </a>
                </li>
                <li>
                    <a href="analytics.html" class="active">
                        <i class="fas fa-chart-line"></i>
                        Analytics
                    </a>
                </li>
            </ul>

            <a href="../index.html" class="logout-btn">
                <i class="fas fa-arrow-left"></i> Kembali ke Home
            </a>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Content Header -->
            <div class="content-header">
                <h1>Analytics</h1>
                <p>Pantau performa dan produktivitas akademik Anda</p>
            </div>

            <!-- Overview Stats -->
            <div class="stats-grid" style="grid-template-columns: repeat(4, 1fr);">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <div class="stat-value" id="completionRate">0%</div>
                    <div class="stat-label">Completion Rate</div>
                    <div class="stat-trend up">
                        <i class="fas fa-arrow-up"></i> 12% dari bulan lalu
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-value" id="avgTime">2.5</div>
                    <div class="stat-label">Jam / Hari</div>
                    <div class="stat-trend up">
                        <i class="fas fa-arrow-up"></i> Produktif
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-fire"></i>
                    </div>
                    <div class="stat-value">7</div>
                    <div class="stat-label">Day Streak</div>
                    <div class="stat-trend up">
                        <i class="fas fa-fire-flame-curved"></i> On fire!
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="stat-value">Level 5</div>
                    <div class="stat-label">Rank</div>
                    <div class="stat-trend">
                        <i class="fas fa-gem"></i> Gold Status
                    </div>
                </div>
            </div>

            <!-- Charts Grid -->
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; margin-bottom: 1.5rem;">
                <!-- Task Distribution Chart -->
                <div class="chart-card">
                    <div class="chart-header">
                        <div class="chart-title">
                            <i class="fas fa-pie-chart"></i>
                            Status Tugas
                        </div>
                    </div>
                    <div class="chart-body">
                        <canvas id="taskDistributionChart"></canvas>
                    </div>
                </div>

                <!-- Weekly Progress Chart -->
                <div class="chart-card">
                    <div class="chart-header">
                        <div class="chart-title">
                            <i class="fas fa-chart-line"></i>
                            Produktivitas Mingguan
                        </div>
                    </div>
                    <div class="chart-body">
                        <canvas id="weeklyProgressChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Subject Analysis -->
            <div class="chart-card" style="margin-bottom: 1.5rem;">
                <div class="chart-header">
                    <div class="chart-title">
                        <i class="fas fa-book"></i>
                        Tugas per Mata Kuliah
                    </div>
                </div>
                <div class="chart-body" style="height: 300px;">
                    <canvas id="subjectChart"></canvas>
                </div>
            </div>

            <!-- Achievement Cards -->
            <div style="margin-bottom: 1.5rem;">
                <h3 style="margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-medal" style="color: var(--accent-primary);"></i>
                    Pencapaian Terbaru
                </h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                    <div class="stat-card" style="display: flex; align-items: center; gap: 1rem;">
                        <div
                            style="width: 60px; height: 60px; background: linear-gradient(135deg, #fbbf24, #f59e0b); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                            üèÜ
                        </div>
                        <div>
                            <h4 style="font-size: 0.9375rem; margin-bottom: 0.25rem;">Early Bird</h4>
                            <p style="font-size: 0.8125rem; color: var(--text-tertiary);">Selesaikan 5 tugas sebelum
                                deadline</p>
                        </div>
                    </div>

                    <div class="stat-card" style="display: flex; align-items: center; gap: 1rem;">
                        <div
                            style="width: 60px; height: 60px; background: linear-gradient(135deg, #a855f7, #7c3aed); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                            üî•
                        </div>
                        <div>
                            <h4 style="font-size: 0.9375rem; margin-bottom: 0.25rem;">7-Day Streak</h4>
                            <p style="font-size: 0.8125rem; color: var(--text-tertiary);">Konsisten belajar selama 7
                                hari</p>
                        </div>
                    </div>

                    <div class="stat-card" style="display: flex; align-items: center; gap: 1rem;">
                        <div
                            style="width: 60px; height: 60px; background: linear-gradient(135deg, #06b6d4, #0891b2); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                            üß™
                        </div>
                        <div>
                            <h4 style="font-size: 0.9375rem; margin-bottom: 0.25rem;">Lab Master</h4>
                            <p style="font-size: 0.8125rem; color: var(--text-tertiary);">Selesaikan 10 eksperimen</p>
                        </div>
                    </div>

                    <div class="stat-card" style="display: flex; align-items: center; gap: 1rem;">
                        <div
                            style="width: 60px; height: 60px; background: linear-gradient(135deg, #10b981, #059669); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                            ‚≠ê
                        </div>
                        <div>
                            <h4 style="font-size: 0.9375rem; margin-bottom: 0.25rem;">Perfect Score</h4>
                            <p style="font-size: 0.8125rem; color: var(--text-tertiary);">100% completion rate minggu
                                ini</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Weekly Summary Table -->
            <div class="table-container">
                <div class="table-header">
                    <h2><i class="fas fa-calendar-week"></i> Ringkasan Mingguan</h2>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>Hari</th>
                            <th>Tugas Selesai</th>
                            <th>Eksperimen</th>
                            <th>Jam Belajar</th>
                            <th>Produktivitas</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Senin</td>
                            <td>3</td>
                            <td>1</td>
                            <td>2.5 jam</td>
                            <td><span class="status-badge status-selesai">Sangat Baik</span></td>
                        </tr>
                        <tr>
                            <td>Selasa</td>
                            <td>2</td>
                            <td>0</td>
                            <td>2 jam</td>
                            <td><span class="status-badge status-sedang">Baik</span></td>
                        </tr>
                        <tr>
                            <td>Rabu</td>
                            <td>4</td>
                            <td>2</td>
                            <td>3 jam</td>
                            <td><span class="status-badge status-selesai">Sangat Baik</span></td>
                        </tr>
                        <tr>
                            <td>Kamis</td>
                            <td>2</td>
                            <td>1</td>
                            <td>2 jam</td>
                            <td><span class="status-badge status-sedang">Baik</span></td>
                        </tr>
                        <tr>
                            <td>Jumat</td>
                            <td>3</td>
                            <td>1</td>
                            <td>2.5 jam</td>
                            <td><span class="status-badge status-selesai">Sangat Baik</span></td>
                        </tr>
                        <tr>
                            <td>Sabtu</td>
                            <td>1</td>
                            <td>0</td>
                            <td>1.5 jam</td>
                            <td><span class="status-badge status-sedang">Baik</span></td>
                        </tr>
                        <tr>
                            <td>Minggu</td>
                            <td>2</td>
                            <td>1</td>
                            <td>2 jam</td>
                            <td><span class="status-badge status-selesai">Sangat Baik</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            if (typeof AcademicOrganizer !== 'undefined') {
                AcademicOrganizer.init();
                loadAnalytics();
            }
            initCharts();
        });

        function loadAnalytics() {
            const stats = AcademicOrganizer.getStats();
            document.getElementById('completionRate').textContent = stats.completionRate + '%';
        }

        function initCharts() {
            const stats = typeof AcademicOrganizer !== 'undefined' ? AcademicOrganizer.getStats() : { pendingTasks: 3, inProgressTasks: 2, completedTasks: 5 };

            // Task Distribution Doughnut Chart
            const distributionCtx = document.getElementById('taskDistributionChart');
            if (distributionCtx) {
                new Chart(distributionCtx.getContext('2d'), {
                    type: 'doughnut',
                    data: {
                        labels: ['Belum Selesai', 'Sedang Dikerjakan', 'Selesai'],
                        datasets: [{
                            data: [stats.pendingTasks, stats.inProgressTasks, stats.completedTasks],
                            backgroundColor: [
                                'rgba(239, 68, 68, 0.8)',
                                'rgba(245, 158, 11, 0.8)',
                                'rgba(16, 185, 129, 0.8)'
                            ],
                            borderColor: [
                                'rgba(239, 68, 68, 1)',
                                'rgba(245, 158, 11, 1)',
                                'rgba(16, 185, 129, 1)'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: '#a1a1b5',
                                    padding: 16,
                                    usePointStyle: true,
                                    pointStyle: 'circle'
                                }
                            }
                        },
                        cutout: '60%'
                    }
                });
            }

            // Weekly Progress Line Chart
            const weeklyCtx = document.getElementById('weeklyProgressChart');
            if (weeklyCtx) {
                new Chart(weeklyCtx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: ['Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab', 'Min'],
                        datasets: [{
                            label: 'Produktivitas',
                            data: [75, 82, 90, 78, 88, 70, 85],
                            borderColor: '#00d4ff',
                            backgroundColor: (context) => {
                                const chart = context.chart;
                                const { ctx, chartArea } = chart;
                                if (!chartArea) return null;
                                const gradient = ctx.createLinearGradient(0, chartArea.bottom, 0, chartArea.top);
                                gradient.addColorStop(0, 'rgba(0, 212, 255, 0)');
                                gradient.addColorStop(1, 'rgba(0, 212, 255, 0.3)');
                                return gradient;
                            },
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: '#00d4ff',
                            pointBorderColor: '#fff',
                            pointBorderWidth: 2,
                            pointRadius: 5,
                            pointHoverRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                grid: { color: 'rgba(255,255,255,0.05)' },
                                ticks: { color: '#6b6b80' }
                            },
                            x: {
                                grid: { display: false },
                                ticks: { color: '#6b6b80' }
                            }
                        }
                    }
                });
            }

            // Subject Bar Chart
            const subjectCtx = document.getElementById('subjectChart');
            if (subjectCtx) {
                // Get subject distribution from tasks
                const tasks = typeof AcademicOrganizer !== 'undefined' ? AcademicOrganizer.getTasks() : [];
                const subjectCount = {};
                tasks.forEach(task => {
                    subjectCount[task.subject] = (subjectCount[task.subject] || 0) + 1;
                });

                const subjects = Object.keys(subjectCount);
                const counts = Object.values(subjectCount);

                new Chart(subjectCtx.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: subjects.length > 0 ? subjects : ['Fisika', 'Matematika', 'Web Dev', 'Database', 'Jaringan'],
                        datasets: [{
                            label: 'Jumlah Tugas',
                            data: counts.length > 0 ? counts : [3, 2, 4, 2, 1],
                            backgroundColor: [
                                'rgba(0, 212, 255, 0.8)',
                                'rgba(124, 58, 237, 0.8)',
                                'rgba(244, 114, 182, 0.8)',
                                'rgba(16, 185, 129, 0.8)',
                                'rgba(245, 158, 11, 0.8)'
                            ],
                            borderColor: [
                                'rgba(0, 212, 255, 1)',
                                'rgba(124, 58, 237, 1)',
                                'rgba(244, 114, 182, 1)',
                                'rgba(16, 185, 129, 1)',
                                'rgba(245, 158, 11, 1)'
                            ],
                            borderWidth: 2,
                            borderRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: { color: 'rgba(255,255,255,0.05)' },
                                ticks: {
                                    color: '#6b6b80',
                                    stepSize: 1
                                }
                            },
                            x: {
                                grid: { display: false },
                                ticks: { color: '#6b6b80' }
                            }
                        }
                    }
                });
            }
        }
    </script>
</body>

</html>